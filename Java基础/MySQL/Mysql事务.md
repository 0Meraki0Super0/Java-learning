用于保证数据一致性，由一组DML语句（数据操作）组成。该组的语句要么全部成功  ~~要么全失败

### 事务操作

1. 开始事务：start transaction
2. 设置保存点：savepoint a
3. 执行DML语句
4. 回退到a点：rollback to a
	 - 可回到指定保存点
5. 提交事务：commit
	- 提交后自动删除所有保存点，不能再回退。所有数据正式生效。其他会话可以查看新数据

### 注意事项

- 如果不手动开启事务，DML操作默认自动提交
- 若开启事务，但未创建保存点，rollback时自动回到起点
- MySQL的事务机制需要innodb的存储引擎才能使用
- 开启事务后需要 set autocommit = off

### 事务的隔离级别

#### 介绍
1. 定义了事务与事务之间的隔离程度
2. 多个连接开启各自事务来操作数据库时，数据库要负责隔离操作，以保证各连接获取数据准确
3. 避免以下问题：
	- 脏读：一个事务读取另一事务==未提交==的改变
	- 不可重复读：同一查询在同一事务中重复进行，由于其他事务的修改/删除操作，每次返回不同的结果
	- 幻读：同一查询在同一事务中重复进行，由于其他事务的插入操作，每次返回不同的结果

#### 事务隔离级别

![[Pasted image 20231201134033.png]]
*注：可串行化指当A操作数据库时，暂时锁定B的查询操作，当A提交修改后再将结果同步到B端*
    默认为Repeatable read

### 事务的ACID特性

- 原子性：事务是一个整体，不可分割
- 一致性：数据库始终为一致状态
- 隔离性：多个用户并发访问时，数据库保证每个用户不被其他事务干扰
- 持久性：一旦提交数据，永久保留



























